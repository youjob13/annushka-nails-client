<ann-progress-bar [progress]="formCompleteProgress"></ann-progress-bar>

<form class="controls">
  <tui-input
    #usernameControlRef
    [tuiTextfieldSize]="isMobile() ? 'm' : 'l'"
    class="b-form control username"
    autocomplete="current-password"
    [formControl]="usernameControl"
    [tuiTextfieldCustomContent]="
      !usernameControlRef.touched
        ? ''
        : usernameControlRef.valid
        ? success
        : error
    "
  >
    Username
  </tui-input>

  <tui-input-password
    #passwordControlRef
    [tuiTextfieldSize]="isMobile() ? 'm' : 'l'"
    autocomplete="current-password"
    class="b-form control"
    [pattern]="PasswordRegexp"
    [formControl]="passwordControl"
    [tuiTextfieldCustomContent]="
      !passwordControlRef.touched
        ? ''
        : passwordControlRef.valid
        ? success
        : error
    "
  >
    Type password
  </tui-input-password>

  <tui-input-password
    #repeatedPasswordControlRef
    [tuiTextfieldSize]="isMobile() ? 'm' : 'l'"
    autocomplete="current-password"
    class="b-form control"
    [formControl]="repeatedPasswordControl"
    [tuiTextfieldCustomContent]="
      !repeatedPasswordControlRef.touched
        ? ''
        : repeatedPasswordControlRef.valid
        ? success
        : error
    "
  >
    Repeat password
  </tui-input-password>

  <tui-checkbox
    [ngModelOptions]="{ standalone: true }"
    [(ngModel)]="passwordControlRef.isPasswordHidden"
    (ngModelChange)="repeatedPasswordControlRef.isPasswordHidden = $event"
    class="tui-space_bottom-3"
  ></tui-checkbox>

  <button
    appearance="primary"
    tuiButton
    type="button"
    class="tui-space_right-3 tui-space_bottom-3"
    [disabled]="formModel.invalid"
    (click)="onSubmit()"
  >
    Sign Up
  </button>
</form>

<ng-template #success>
  <tui-svg src="tuiIconCheck" class="success tui-space_left-3"></tui-svg>
</ng-template>

<ng-template #error>
  <tui-svg src="tuiIconCheck" class="fail tui-space_left-3"></tui-svg>
</ng-template>
